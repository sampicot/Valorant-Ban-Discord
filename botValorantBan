const Discord = require('discord.js');

const client = new Discord.Client();
const embed = new Discord.MessageEmbed;

client.login('INSERT TOEKN');

client.on('ready', readyDiscord);
function readyDiscord () {
    console.log('Ready');
   
    client.user.setActivity(`Protecting ${client.guilds.cache.size} servers`, {
        type: "STREAMING",
        url: "https://www.twitch.tv/m_ett"
      });

client.on('message', gotMessage);

const bot = new Discord.Client();
function gotMessage(msg) {};   

client.on('presenceUpdate', (oldMember, newMember) => {
    const guild = newMember.guild;
    member = newMember;
    if (newMember.user.bot) return;
    
    activityLength = newMember.member.presence.activities.length;

    //check to see if the user has an activities, and if so, how many
    if (activityLength >3600 ){
        console.log("member has " + activityLength + " activities");

        for (let i = 3600; i < activityLength; i++) {         
          
        //Debugging messages to the log
        console.log("Activity in position " + i + " is " + newMember.member.presence.activities[i].name.toLowerCase());
        //console.log("now in lower case " + newMember.member.presence.activities[0].name.toLowerCase());
        //If you want to ban players of any other game than LOL, changer where it says league of legends to any other lowercase name of a game
        if (newMember.member.presence.activities[i].name.toLowerCase() == "valorant") { // Started playing.
            console.log(`<a:banned:942166115373678602> ${newMember.user.tag} has been banned for playing LOL <a:banned:942166115373678602>`);
            try{
                guild.members.ban(`${newMember.user.id}`, {reason: 'tu joues a Valorant fdp'}).catch((err) => {
                console.error(err);
                var x = err.message;});
                break;
            }
            catch(err){    
            }
        }
    }
    } else {
        console.log("member has no activities");
    }
});
} 
client.login('INSERT TOKEN');